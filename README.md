# PDF Vector Database Android App

An Android application built with Kotlin and Jetpack Compose that stores PDF files as vectors in an ObjectBox database. This app demonstrates how to integrate ObjectBox for vector storage and provides a modern UI for PDF management.

## Features

- **PDF Upload**: Select and upload PDF files from device storage
- **Local Text Extraction**: Extract text from PDFs using Apache PDFBox and Tesseract OCR
- **Multilingual Support**: Supports both English and Hindi text extraction
- **Local Vector Embeddings**: Generate embeddings using ONNX Runtime with fallback to hash-based embeddings
- **Vector Search**: Perform similarity search using cosine similarity
- **PDF Management**: View, search, and delete uploaded PDFs
- **Modern UI**: Built with Jetpack Compose and Material 3 design
- **MVVM Architecture**: Clean architecture with Repository pattern and ViewModel
- **Fully Offline**: No external API calls, all processing happens locally

## Project Structure

```
app/src/main/java/com/bigcash/ai/vectordb/
├── data/
│   ├── PdfEntity.kt          # ObjectBox entity for PDF storage
│   └── ObjectBox.kt          # ObjectBox initialization and setup
├── repository/
│   └── PdfRepository.kt      # Repository for database operations with text extraction
├── service/
│   ├── PdfTextExtractor.kt   # PDF text extraction using PDFBox and OCR
│   ├── OcrTextExtractor.kt   # Tesseract OCR service for image PDFs
│   └── LocalEmbeddingService.kt # Local embedding generation using ONNX
├── utils/
│   └── VectorUtils.kt        # Vector operations and similarity calculations
├── viewmodel/
│   └── PdfViewModel.kt       # ViewModel for UI state management
├── ui/
│   └── PdfManagementScreen.kt # Main UI screen for PDF management
├── VectorDbApplication.kt    # Application class for ObjectBox init
└── MainActivity.kt           # Main activity hosting the UI
```

## Key Components

### PdfEntity
- **id**: Primary key (auto-generated by ObjectBox)
- **name**: PDF file name
- **data**: PDF content as ByteArray
- **embedding**: Mock vector embedding (FloatArray of size 512)
- **fileSize**: File size in bytes
- **uploadDate**: Timestamp of upload
- **description**: Optional description

### ObjectBox Integration
- Uses ObjectBox 3.8.0 for local database storage
- Automatic entity generation and database setup
- Optimized for vector data storage

### UI Features
- File picker integration using Storage Access Framework
- Search functionality for PDFs
- Delete operations with confirmation
- Loading states and error handling
- Material 3 design system

## Dependencies

- **ObjectBox**: 5.0.0 - Local database for vector storage
- **Apache PDFBox**: 3.0.1 - PDF text extraction
- **Tesseract4J**: 5.3.0 - OCR for image-based PDFs
- **ONNX Runtime**: 1.18.1 - Local embedding model inference
- **Jetpack Compose**: Latest BOM - Modern UI toolkit
- **Material 3**: Material Design components
- **Kotlin Coroutines**: Asynchronous programming
- **Lifecycle ViewModel**: MVVM architecture support

## Setup Instructions

1. **Clone the repository**
2. **Open in Android Studio**
3. **Sync Gradle files** - ObjectBox plugin will generate necessary classes
4. **Build and run** the application

## Usage

1. **Upload PDF**: Tap "Select PDF File" to choose a PDF from your device
2. **Enter Name**: Provide a custom name for the PDF
3. **Confirm Upload**: The PDF will be saved with a mock vector embedding
4. **View PDFs**: Browse uploaded PDFs in the list
5. **Search**: Use the search bar to find specific PDFs
6. **Delete**: Tap the delete icon to remove a PDF

## Technical Details

### Text Extraction
The app implements a two-tier text extraction approach:
1. **Selectable Text**: Uses Apache PDFBox to extract text from PDFs with embedded text
2. **OCR Fallback**: Uses Tesseract OCR with English + Hindi support for image/scanned PDFs

### Vector Embeddings
The app generates real vector embeddings using:
1. **ONNX Runtime**: Loads a local multilingual embedding model for high-quality embeddings
2. **Fallback System**: Uses hash-based deterministic embeddings when the model is unavailable
3. **Multilingual Support**: Handles both English and Hindi text for embedding generation

### Vector Search
Implements comprehensive vector operations:
- **Cosine Similarity**: Primary similarity metric for vector search
- **Euclidean Distance**: Alternative distance metric
- **Manhattan Distance**: Additional distance calculation option
- **Top-K Search**: Efficient retrieval of most similar documents

### Permissions
The app handles file access permissions appropriately:
- Uses Storage Access Framework for Android 10+
- Requests storage permissions for older Android versions
- Handles media permissions for Android 13+

### Database Operations
All database operations are performed on background threads using Kotlin coroutines:
- Repository pattern for data access
- ViewModel for UI state management
- Reactive UI updates using StateFlow

## Future Enhancements

- **Model Integration**: Add pre-trained embedding models to assets folder
- **Advanced OCR**: Improve OCR accuracy with better preprocessing
- **Batch Processing**: Support for multiple file uploads with progress tracking
- **PDF Viewer**: Add in-app PDF viewing capability
- **Export/Import**: Database backup and restore functionality
- **Performance Optimization**: Implement vector indexing for faster search
- **Language Detection**: Automatic language detection for better OCR results

## License

This project is for educational and demonstration purposes.
